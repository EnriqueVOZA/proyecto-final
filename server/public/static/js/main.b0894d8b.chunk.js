(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(32),r=a.n(o),c=a(2),i=a(8),l=a(10),h=a(12),d=a(11),j=(a(115),a(116),a(17)),b=a(163),u=a(96),p=a(164),m=a(161),O=a(165),x=a(22),f=a.n(x),g=function e(){var t=this;Object(i.a)(this,e),this.users=function(){return t.app.get("/users")},this.profile=function(e){return t.app.get("/profile",e)},this.othersProfile=function(e){return t.app.get("/profile/".concat(e))},this.editProfile=function(e){return t.app.put("/profile/",e)},this.deleteProfile=function(){return t.app.delete("/profile")},this.followUnfollow=function(e,a,s){return t.app.put("/profile/".concat(s),{follow_id:e,follow:a})},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api"),withCredentials:!0})},v=function e(){var t=this;Object(i.a)(this,e),this.bookCreate=function(e){return t.app.post("/create",e)},this.bookList=function(){return t.app.get("/list")},this.bookToConfirm=function(){return t.app.get("/confirm/list")},this.bookConfirmed=function(e,a){return t.app.put("/confirm/".concat(a),{accepted:e})},this.bookDetails=function(e){return t.app.get("/details/".concat(e))},this.bookEdit=function(e,a){return t.app.put("/".concat(a),e)},this.bookDelete=function(){return t.app.delete("/:book_id")},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api","/book"),withCredentials:!0})},w=a(41),k=a(172),C=a(162),S=a(160),N=a(15),y=a(0),U=function(e){var t=e.firstName,a=e.lastName,s=e.image,n=e._id;return Object(y.jsx)(u.a,{md:3,className:"home-col",children:Object(y.jsxs)(N.b,{className:"nav-link",to:"/profile/"+n,children:[Object(y.jsx)("img",{className:"card-img",variant:"top",src:s,alt:t+"profile"}),Object(y.jsxs)("button",{className:"profile-title",children:[t," ",a]})]})})},I=function(e){var t=e.friends;return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{className:"timeline",children:t?t.map((function(e){return Object(y.jsx)(U,Object(c.a)({},e),e._id)})):null})})},L=function(e){var t=e.image,a=e.title,s=e._id;return Object(y.jsx)(u.a,{md:3,className:"home-col",children:Object(y.jsxs)(N.b,{className:"nav-link",to:"/book/details/"+s,children:[Object(y.jsx)("img",{className:"card-img",variant:"top",src:t,alt:a+"profile image"}),Object(y.jsx)("button",{className:"profile-title",children:a})]})})},F=function(e){var t=e.books;return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{children:t?t.map((function(e){return Object(y.jsx)(L,Object(c.a)({},e),e._id)})):null})})},M=function(e){var t=e.image,a=e.title,s=e._id;return Object(y.jsx)(u.a,{md:3,className:"home-col",children:Object(y.jsxs)(N.b,{className:"nav-link",to:"/post/details/"+s,children:[Object(y.jsx)("img",{className:"card-img",variant:"top",src:t,alt:a+"profile image"}),Object(y.jsx)("button",{className:"profile-title",children:a})]})})},_=function(e){var t=e.posts;return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{children:t?t.map((function(e){return Object(y.jsx)(M,Object(c.a)({},e),e._id)})):null})})},B=function(e){var t=e.friends,a=e.books,n=e.posts,o=Object(s.useState)("friends"),r=Object(w.a)(o,2),c=r[0],i=r[1];return Object(y.jsx)(m.a,{children:Object(y.jsx)(u.a,{className:"profile-navbar",children:Object(y.jsxs)(k.a,{id:"controlled-tab-example",activeKey:c,onSelect:function(e){return i(e)},children:[Object(y.jsx)(C.a,{eventKey:"friends",title:"Friends",children:Object(y.jsx)(S.a,{className:"container-profilebar",children:Object(y.jsx)(m.a,{children:Object(y.jsx)(I,{friends:t})})})}),Object(y.jsx)(C.a,{eventKey:"books",title:"Books",children:Object(y.jsx)(S.a,{className:"container-profilebar",children:Object(y.jsx)(m.a,{children:Object(y.jsx)(F,{books:a})})})}),Object(y.jsx)(C.a,{eventKey:"post",title:"Post",children:Object(y.jsx)(S.a,{className:"container-profilebar",children:Object(y.jsx)(m.a,{children:Object(y.jsx)(_,{posts:n})})})})]})})})},G=a(13),D=a(168),P=function e(){var t=this;Object(i.a)(this,e),this.uploadImage=function(e){return t.app.post("/image",e)},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api","/upload"),withCredentials:!0})},q=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.bookService.bookCreate(e.state.book).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(e){return console.log(e)}))},e.state={book:{title:"",author:"",publisher:"",image:"",description:"",accepted:"",price:"",currency:"",review:"",owner:""},loading:!1},e.bookService=new v,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsx)("h1",{children:"New Book"}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title",required:!0})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"description",children:[Object(y.jsx)(D.a.Label,{children:"Description"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.description,onChange:this.handleInputChange,name:"description",placeholder:"Description",required:!0})]})}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"author",children:[Object(y.jsx)(D.a.Label,{children:"Author"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.author,onChange:this.handleInputChange,name:"author",placeholder:"Author",required:!0})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"publisher",children:[Object(y.jsx)(D.a.Label,{children:"Publisher"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.publisher,onChange:this.handleInputChange,name:"publisher",placeholder:"Publisher",required:!0})]})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"price",children:[Object(y.jsx)(D.a.Label,{children:"Price"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.price,onChange:this.handleInputChange,name:"price",placeholder:"Price",required:!0})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]})]})})})}}]),a}(s.Component),T=function e(){var t=this;Object(i.a)(this,e),this.postCreate=function(e){return t.app.post("/create",e)},this.postList=function(){return t.app.get("/list")},this.postDetails=function(e){return t.app.get("/details/".concat(e))},this.postEdit=function(e,a){return t.app.put("/".concat(a),e)},this.postDelete=function(){return t.app.delete("/:post_id")},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api","/post"),withCredentials:!0})},z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({post:Object(c.a)(Object(c.a)({},e.state.post),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.postService.postCreate(e.state.post).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,post:Object(c.a)(Object(c.a)({},e.state.post),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={post:{title:"",text:"",image:"",review:"",owner:""},loading:!1},e.postService=new T,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsx)("h1",{children:"New Post"}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title",required:!0})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"text",children:[Object(y.jsx)(D.a.Label,{children:"Text"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.text,onChange:this.handleInputChange,name:"text",placeholder:"Text",required:!0})]})}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",className:"custom-file-input",id:"customFile",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]})]})})})}}]),a}(s.Component),R=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(){e.userService.profile().then((function(t){return e.setState({user:t.data[0]})}))},e.handleInputChange=function(t){var a,s=t.target,n=s.name,o=s.value;console.log(t.target.value),e.setState({user:Object(c.a)(Object(c.a)({},e.state.user),{},(a={},Object(G.a)(a,n,o),Object(G.a)(a,"address",Object(c.a)(Object(c.a)({},e.state.user.address),{},Object(G.a)({},n,o))),a))})},e.handleFormSubmit=function(t){var a=e.props.match.params.user_id;console.log(e.state.user),t.preventDefault(),e.userService.editProfile(e.state.user,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(e){return console.log(e)}))},e.state={user:{email:"",password:"",firstName:"",lastName:"",image:"",cover:"",bio:""},address:{road:"",apartment:"",city:"",state:"",zip:""},loading:!1},e.userService=new g,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.user_id;this.loadFormInfo(e)}},{key:"render",value:function(){var e,t,a,s,n;return Object(y.jsx)(S.a,{children:this.state.user?Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsxs)("h1",{children:["Edit ",this.state.user.firstName," ",this.state.user.lastName]}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"email",children:[Object(y.jsx)(D.a.Label,{children:"email"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.user.email,onChange:this.handleInputChange,name:"email",placeholder:"Username"})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"password",children:[Object(y.jsx)(D.a.Label,{children:"Password"}),Object(y.jsx)(D.a.Control,{type:"password",value:this.state.user.password,onChange:this.handleInputChange,name:"password",placeholder:"Password"})]})}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"firstName",children:[Object(y.jsx)(D.a.Label,{children:"First name"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.user.firstName,onChange:this.handleInputChange,name:"firstName",placeholder:"First name"})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"lastName",children:[Object(y.jsx)(D.a.Label,{children:"Last name"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.user.lastName,onChange:this.handleInputChange,name:"lastName",placeholder:"Last name"})]})]}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"bio",children:[Object(y.jsx)(D.a.Label,{children:"Bio"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.user.bio,onChange:this.handleInputChange,name:"bio",placeholder:"Bio"})]})}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"road",children:[Object(y.jsx)(D.a.Label,{children:"Address"}),Object(y.jsx)(D.a.Control,{type:"text",value:null===(e=this.state.user.address)||void 0===e?void 0:e.road,onChange:this.handleInputChange,name:"road",placeholder:"Street, number"})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"apartment",children:[Object(y.jsx)(D.a.Label,{children:"Address 2"}),Object(y.jsx)(D.a.Control,{type:"text",value:null===(t=this.state.user.address)||void 0===t?void 0:t.apartment,onChange:this.handleInputChange,name:"apartment",placeholder:"Apartment, studio, or floor"})]}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"city",children:[Object(y.jsx)(D.a.Label,{children:"City"}),Object(y.jsx)(D.a.Control,{type:"text",value:null===(a=this.state.user.address)||void 0===a?void 0:a.city,onChange:this.handleInputChange,name:"city",placeholder:"City"})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"state",children:[Object(y.jsx)(D.a.Label,{children:"State"}),Object(y.jsx)(D.a.Control,{type:"text",value:null===(s=this.state.user.address)||void 0===s?void 0:s.state,onChange:this.handleInputChange,name:"state",placeholder:"State"})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"zip",children:[Object(y.jsx)(D.a.Label,{children:"Zip"}),Object(y.jsx)(D.a.Control,{type:"text",value:null===(n=this.state.user.address)||void 0===n?void 0:n.zip,onChange:this.handleInputChange,name:"zip",placeholder:"Zip"})]})]}),Object(y.jsx)("img",{style:{width:"100px"},src:this.state.user.image,alt:"image"}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("img",{style:{width:"100px"},src:this.state.user.cover,alt:"cover"}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"cover",children:[Object(y.jsx)(D.a.Label,{children:"Cover"}),Object(y.jsx)(D.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]})]})}):Object(y.jsx)(b.a,{})})}}]),a}(s.Component),H=function(e){var t=e.books,a=Object(s.useState)("friends"),n=Object(w.a)(a,2),o=n[0],r=n[1];return Object(y.jsx)(m.a,{children:Object(y.jsx)(u.a,{className:"profile-navbar",children:Object(y.jsx)(k.a,{id:"controlled-tab-example",activeKey:o,onSelect:function(e){return r(e)},children:Object(y.jsx)(C.a,{eventKey:"books",title:"Books To Confirm",children:Object(y.jsx)(m.a,{children:Object(y.jsx)(F,{books:t})})})})})})},A=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadBookForAdmin=function(){e.bookService.bookToConfirm().then((function(t){return e.setState({booksToConfirm:t.data})})).catch((function(e){return console.log(e)}))},e.loadUser=function(){e.userService.profile().then((function(t){return e.setState({friends:t.data[0].friends,books:t.data[1],posts:t.data[2]})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadUser(),e.loadBookForAdmin()},e.state={books:void 0,post:void 0,booksToConfirm:void 0,modal:!1,modal2:!1,adminModal:!1},e.userService=new g,e.bookService=new v,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return void 0===a?Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"}):a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{md:{span:4,offset:4},children:[Object(y.jsx)(p.a,{className:"cover-img",src:a.cover}),Object(y.jsx)(p.a,{className:"profile-img",src:a.image,roundedCircle:!0}),Object(y.jsxs)("h3",{className:"profile-name",children:[a.firstName," ",a.lastName," ",Object(y.jsx)(p.a,{className:"profile-check",src:""})]}),Object(y.jsx)("p",{className:"profile-email",children:a.email}),Object(y.jsx)("p",{className:"profile-bio",children:a.bio}),Object(y.jsx)("br",{})]}),"ADMIN"===a.role?Object(y.jsxs)(u.a,{md:{span:2,offset:5},children:[Object(y.jsxs)(m.a,{className:"mb-3",children:[" ",Object(y.jsx)("button",{className:"mint-button",onClick:function(){return e.setState({adminModal:!0})},children:"Admin Panel"})]}),Object(y.jsx)("br",{})]}):Object(y.jsx)(u.a,{md:{span:4,offset:4},children:Object(y.jsx)(m.a,{className:"mb-3"})}),Object(y.jsx)(u.a,{md:{span:4,offset:4},children:Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,isPost:!1})},children:"add book"})}),Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,isPost:!0})},children:"add post"})}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:this.state.isPost?Object(y.jsx)(z,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}):Object(y.jsx)(q,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s})})]}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)("button",{className:"pink-button",onClick:function(){return e.setState({modal2:!0})},children:"edit profile"})," "]}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal2,onHide:function(){return e.setState({modal2:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:Object(y.jsx)(R,Object(c.a)(Object(c.a)({},this.props),{},{history:n,closeModal:function(){return e.setState({modal2:!1})},loggedUser:a,storeUser:s}))})]}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.adminModal,onHide:function(){return e.setState({adminModal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:Object(y.jsx)(H,{books:this.state.booksToConfirm})})]})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(B,Object(c.a)(Object(c.a)({},this.props),{},{books:this.state.books,friends:this.state.friends,posts:this.state.posts}))]}):Object(y.jsx)(j.a,{to:"/"})}}]),a}(s.Component),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).followUnfollow=function(t,a,s){e.userService.followUnfollow(t,a,s).then((function(t){return e.props.storeUser(t.data)})).catch((function(e){return console.log(e)}))},e.follow=function(t,a){return e.followUnfollow(t,!0,a)},e.unfollow=function(t,a){return e.followUnfollow(t,!1,a)},e.loadUser=function(){var t=e.props.match.params.user_id;e.userService.othersProfile(t).then((function(e){return console.log("res.data",e.data),e})).then((function(t){return e.setState({otherUser:t.data[0],friends:t.data[0].friends,books:t.data[1],posts:t.data[2]})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadUser()},e.state={otherUser:void 0,books:void 0,friends:void 0,posts:void 0},e.userService=new g,e}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,s=this.props,n=s.loggedUser;s.storeUser,s.history;return this.state.otherUser?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{md:{span:6,offset:3},children:[Object(y.jsx)(p.a,{className:"cover-img",src:this.state.otherUser.cover}),Object(y.jsx)(p.a,{className:"profile-img",src:this.state.otherUser.image,roundedCircle:!0}),Object(y.jsxs)("h3",{className:"profile-name",children:[this.state.otherUser.firstName," ",this.state.otherUser.lastName]}),Object(y.jsx)("p",{className:"profile-email",children:this.state.otherUser.email}),Object(y.jsx)("p",{className:"profile-bio",children:this.state.otherUser.bio}),Object(y.jsx)("br",{})]}),Object(y.jsx)(u.a,{md:{span:4,offset:4},children:Object(y.jsx)(m.a,{className:"mb-3",children:n?Object(y.jsx)(u.a,{md:{span:4,offset:4},children:(e=n.friends,t=this.state.otherUser._id,console.log("alooo",e,t),e.find((function(e){return e===t}))?Object(y.jsx)("button",{className:"pink-button",onClick:function(){return a.follow(a.state.otherUser._id,n._id)},loggedUser:n,children:"unfollow"}):Object(y.jsx)("button",{className:"blue-button",onClick:function(){return a.unfollow(a.state.otherUser._id,n._id)},loggedUser:n,children:"follow"}))}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})}),Object(y.jsx)("br",{}),Object(y.jsx)(B,Object(c.a)(Object(c.a)({},this.props),{},{books:this.state.books,friends:this.state.friends,posts:this.state.posts}))]}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})}}]),a}(s.Component),K=a(29),Z=function e(){var t=this;Object(i.a)(this,e),this.magicSplash=function(e){return t.app.get("/".concat(e))},this.app=f.a.create({baseURL:"https://api.unsplash.com/search/photos"})},W=function e(){var t=this;Object(i.a)(this,e),this.getUnsplash=function(){return t.app.get("/unsplash")},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api"),withCredentials:!0})},J=function(e){var t=e.alt_description,a=e.urls;return Object(y.jsx)(u.a,{sm:6,md:3,className:"random-card-div",children:Object(y.jsx)(u.a,{className:"random-card",children:Object(y.jsx)("img",{src:a.regular,alt:t})})})},V=function(e){var t=e.image,a=e._id,s=e.title,n=e.price;return Object(y.jsx)(u.a,{md:3,className:"home-col",children:Object(y.jsx)("div",{children:Object(y.jsxs)(N.b,{className:"nav-link",to:n?"/book/details/"+a:"/post/details/"+a,children:[Object(y.jsx)("img",{className:"card-img",src:t,alt:s+" image"}),Object(y.jsx)("button",{className:"title",children:s})]})})})},Q=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e){return t.app.post("/register",e)},this.login=function(e,a){return t.app.post("/login",{email:e,password:a})},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.post("/isLoggedIn")},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api"),withCredentials:!0})},X=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState(Object(G.a)({},s,n))},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,s=a.email,n=a.password;e.authService.login(s,n).then((function(t){e.props.storeUser(t.data),e.props.history.push("/"),e.props.closeModal()})).catch((function(t){return e.props.showMessage("".concat(t.response.data.message))}))},e.state={email:"",password:""},e.authService=new Q,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(y.jsx)(S.a,{className:"modal-form",children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsx)("h1",{children:"Login"}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{className:"login-form",onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"email",children:[Object(y.jsx)(D.a.Label,{children:"Email"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email",placeholder:"Username"})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"password",children:[Object(y.jsx)(D.a.Label,{children:"Password"}),Object(y.jsx)(D.a.Control,{type:"password",value:this.state.password,onChange:this.handleInputChange,name:"password",placeholder:"Password"})]})}),Object(y.jsx)("button",{className:"btn-form",children:"login"})]})]})})})}}]),a}(s.Component),Y=Object(j.g)(X),$=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.authService.signup(e.state.user).then((function(){e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(t){return e.props.showMessage(t.response.data.message)}))},e.state={user:{email:"",password:"",firstName:"",lastName:"",image:"",cover:"",bio:"",road:"",apartment:"",city:"",state:""},loading:!1},e.authService=new Q,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(y.jsx)(S.a,{className:"modal-form",children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsx)("h1",{children:"Sign Up"}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"email",children:[Object(y.jsx)(D.a.Label,{children:"email"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email",placeholder:"Username",required:!0})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"password",children:[Object(y.jsx)(D.a.Label,{children:"Password"}),Object(y.jsx)(D.a.Control,{type:"password",value:this.state.password,onChange:this.handleInputChange,name:"password",placeholder:"Password",required:!0})]})}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"firstName",children:[Object(y.jsx)(D.a.Label,{children:"First name"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.firstName,onChange:this.handleInputChange,name:"firstName",placeholder:"First name",required:!0})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"lastName",children:[Object(y.jsx)(D.a.Label,{children:"Last name"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.lastName,onChange:this.handleInputChange,name:"lastName",placeholder:"Last name",required:!0})]})]}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"bio",children:[Object(y.jsx)(D.a.Label,{children:"Bio"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.bio,onChange:this.handleInputChange,name:"bio",placeholder:"Bio",required:!0})]})}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"road",children:[Object(y.jsx)(D.a.Label,{children:"Address"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.road,onChange:this.handleInputChange,name:"road",placeholder:"Street, number",required:!0})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"apartment",children:[Object(y.jsx)(D.a.Label,{children:"Address 2"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.apartment,onChange:this.handleInputChange,name:"apartment",placeholder:"Apartment, studio, or floor",required:!0})]}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"city",children:[Object(y.jsx)(D.a.Label,{children:"City"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.city,onChange:this.handleInputChange,name:"city",placeholder:"City",required:!0})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"state",children:[Object(y.jsx)(D.a.Label,{children:"State"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.state,onChange:this.handleInputChange,name:"state",placeholder:"State",required:!0})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"zip",children:[Object(y.jsx)(D.a.Label,{children:"Zip"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.zip,onChange:this.handleInputChange,name:"zip",placeholder:"Zip",required:!0})]})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"cover",children:[Object(y.jsx)(D.a.Label,{children:"Cover"}),Object(y.jsx)(D.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"join us"})]}),Object(y.jsx)("br",{})]})})})}}]),a}(s.Component),ee=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).queryForImages=function(t){var a=Math.trunc(60*Math.random()-1),s="?page=".concat(a,"&per_page=12&query=").concat("books","&client_id=").concat(t);e.unsplashService.magicSplash(s).then((function(t){return e.setState({photos:t.data.results})})).catch((function(e){return console.log(e)}))},e.loadUnsplash=function(){e.unsplashApiService.getUnsplash().then((function(t){return e.queryForImages(t.data)})).then(e.setState({loading:!0})).catch((function(e){return console.log(e)}))},e.getTimeline=function(){var t=e.bookService.bookList(),a=e.postService.postList();Promise.all([t,a]).then((function(t){e.setState({books:t[0].data,posts:t[1].data,timeline:[].concat(Object(K.a)(t[0].data),Object(K.a)(t[1].data))})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadUnsplash(),e.getTimeline()},e.state={photos:void 0,books:!1,posts:!1,timeline:[],modal:!1,loading:!1,registerShown:!1},e.unsplashService=new Z,e.unsplashApiService=new W,e.bookService=new v,e.postService=new T,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return this.state.photos?Object(y.jsx)(y.Fragment,{children:a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{className:"home-title",children:"for Words..."}),Object(y.jsx)("p",{className:"quotes",children:"\u201cBooks are a uniquely portable magic.\u201d"}),Object(y.jsx)("div",{className:"decambiar"}),this.state.books.length&&Object(y.jsx)(m.a,{className:"timeline",children:this.state.timeline.map((function(e){return Object(y.jsx)(V,Object(c.a)({},e),e._id)}))})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{className:"home-title",children:"for Words..."}),Object(y.jsx)("p",{className:"quotes",children:"\u201cSo many books, so little time.\u201d"}),Object(y.jsx)("div",{className:"random-img",children:this.state.loading?Object(y.jsxs)(y.Fragment,{children:[" ",Object(y.jsxs)(m.a,{className:"timeline",children:[this.state.photos.map((function(e){return Object(y.jsx)(J,Object(c.a)({},e),e.id)})),this.state.photos.reverse().map((function(e){return Object(y.jsx)(J,Object(c.a)({},e),e.id)}))]}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",className:"login-modal",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),this.state.registerShown?Object(y.jsx)($,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Y,{history:n,handleFormSubmit:this.onSubmit,storeUser:s}),Object(y.jsx)("button",{className:"navbar-button",onClick:function(){return e.setState({modal:!0,registerShown:!0})},children:"Register"})]})]})]}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})]})}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})}}]),a}(s.Component),te=function e(){var t=this;Object(i.a)(this,e),this.reviewCreate=function(e){return t.app.post("/create",e)},this.reviewDetails=function(e){return t.app.get("/details/".concat(e))},this.reviewEdit=function(e,a){return t.app.put("/".concat(a),e)},this.reviewDelete=function(e){return t.app.delete("/".concat(e))},this.app=f.a.create({baseURL:"".concat("https://for-words.herokuapp.com/api","/review"),withCredentials:!0})},ae=(a(16),a(105)),se=a(171),ne=a(103),oe=a.n(ne),re=a(98),ce=a.n(re),ie=a(99),le=a.n(ie),he=a(100),de=a.n(he),je=a(101),be=a.n(je),ue=a(102),pe=a.n(ue),me=a(167),Oe=Object(ae.a)({iconFilled:{color:"#ff6d75"},iconHover:{color:"#ff3d47"}})(se.a);ce.a,le.a,de.a,be.a,pe.a;var xe=function(e){var t=e.handleRating;return Object(y.jsx)(me.a,{component:"fieldset",mb:4,borderColor:"transparent",children:Object(y.jsx)(Oe,{onChange:function(e,a){t(a)},name:"customized-color",defaultValue:0,precision:1,icon:Object(y.jsx)(oe.a,{fontSize:"inherit"})})})},fe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},Object(G.a)({},s,n))})},e.handleRating=function(t){e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},{points:t})})},e.handleFormSubmit=function(t){t.preventDefault(),e.reviewService.reviewCreate(e.state.review).then((function(){e.state.review.price?e.props.history.push("/book/details/".concat(e.state.review.file_id)):e.props.history.push("/post/details/".concat(e.state.review.file_id)),e.state.review.price?e.props.loadBook().then((function(){return e.props.closeModal()})):e.props.loadPost().then((function(){return e.props.closeModal()}))})).catch((function(e){return console.log(e)}))},e.state={review:{title:"",text:"",points:"",owner:"",file_id:"",price:!1},loading:!1},e.reviewService=new te,e.uploadService=new P,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.price?this.setState({review:{price:!0,file_id:this.props.match.params.book_id}}):this.setState({review:{price:!1,file_id:this.props.match.params.post_id}})}},{key:"render",value:function(){return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsx)("h1",{children:"New Review"}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"text",children:[Object(y.jsx)(D.a.Label,{children:"Review"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.text,onChange:this.handleInputChange,name:"text",placeholder:"Review"})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"text",children:[Object(y.jsx)(D.a.Label,{children:"Rating"}),Object(y.jsx)(xe,{type:"number",value:this.state.points,onChange:this.handleInputChange,handleRating:this.handleRating,name:"points"})]})}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]})]})})})}}]),a}(s.Component),ge=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.bookService.bookDetails(t).then((function(t){return e.setState({book:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.book_id;t.preventDefault(),e.bookService.bookEdit(e.state.book,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,book:Object(c.a)(Object(c.a)({},e.state.book),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={book:{title:"",author:"",publisher:"",image:"",description:"",accepted:"",price:"",currency:"",review:"",owner:""},loading:!1},e.bookService=new v,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.book_id;this.loadFormInfo(e)}},{key:"render",value:function(){return console.log(this.props,"PROPS"),Object(y.jsx)(S.a,{children:this.state.book?Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsxs)("h1",{children:["Edit ",this.state.book.title]}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.book.title,onChange:this.handleInputChange,name:"title",placeholder:"Title",required:!0})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"description",children:[Object(y.jsx)(D.a.Label,{children:"Description"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.book.description,onChange:this.handleInputChange,name:"description",placeholder:"Description",required:!0})]})}),Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"author",children:[Object(y.jsx)(D.a.Label,{children:"Author"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.book.author,onChange:this.handleInputChange,name:"author",placeholder:"Author",required:!0})]}),Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"publisher",children:[Object(y.jsx)(D.a.Label,{children:"Publisher"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.book.publisher,onChange:this.handleInputChange,name:"publisher",placeholder:"Publisher",required:!0})]})]}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"price",children:[Object(y.jsx)(D.a.Label,{children:"Price"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.book.price,onChange:this.handleInputChange,name:"price",placeholder:"Price",required:!0})]}),Object(y.jsx)("img",{style:{width:"100px"},src:this.state.book.image,alt:"book cover"}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]})]})}):Object(y.jsx)(b.a,{})})}}]),a}(s.Component),ve=a.p+"static/media/heart.6df3bb27.svg",we=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).printHearts=function(e){for(var t=[],a=0;a<e;a++)t.push(Object(y.jsx)("img",{className:"heart",src:ve}));return t},e.state={modal:!1,review:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.history,s=t.loggedUser,n=t.storeUser,o=(t.loadBook,t.review);return null===o||void 0===o||o.reverse(),Object(y.jsx)(S.a,{children:this.props.title?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{md:{span:6,offset:3},children:[Object(y.jsx)(p.a,{className:"cover-img",src:this.props.image,alt:this.props.title}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("h3",{className:"profile-name",children:[this.props.title,Object(y.jsx)(p.a,{className:"profile-check",src:""})]}),Object(y.jsxs)("p",{className:"profile-email",children:[this.props.description," | ",this.props.price," \u20ac"]})]}),Object(y.jsx)(u.a,{md:{span:2,offset:5},children:Object(y.jsxs)(N.b,{className:"mint-button",to:"/profile/"+this.props.owner[0]._id,children:[this.props.owner[0].firstName," ",this.props.owner[0].lastName]})}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{md:{span:10,offset:1},children:Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,review:!0})},children:"add review"})}),Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"pink-button",onClick:function(){return e.setState({modal:!0})},children:"Edit Book"})})]})}),s&&"ADMIN"===s.role&&this.props.negateBook?Object(y.jsx)(u.a,{md:{span:2,offset:5},children:this.props.accepted?Object(y.jsxs)(m.a,{className:"mb-3",children:[" ",Object(y.jsx)("button",{className:"rose-button",onClick:function(){return e.props.negateBook()},children:"Negate book"})]}):Object(y.jsxs)(m.a,{className:"mb-3",children:[" ",Object(y.jsx)("button",{className:"mint-button",onClick:function(){return e.props.confirmBook()},children:"Confirm book"})]})}):Object(y.jsx)(u.a,{md:{span:4,offset:4},children:Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsx)(N.b,{className:"mint-button",to:"/details/".concat(this.props._id),children:"details"})})}),Object(y.jsxs)(u.a,{md:{span:6,offset:3},children:[Object(y.jsx)("br",{}),Object(y.jsx)("h3",{children:"Reviews: "}),Object(y.jsx)("hr",{}),o.map((function(t){return Object(y.jsxs)(y.Fragment,{children:[e.printHearts(t.points),Object(y.jsx)("h5",{children:t.title}),Object(y.jsx)("p",{children:t.text})]})}))]}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:this.state.review?Object(y.jsx)(fe,Object(c.a)(Object(c.a)({},this.props),{},{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n})):Object(y.jsx)(ge,Object(c.a)(Object(c.a)({},this.props),{},{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n}))})]})]}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})}}]),a}(s.Component),ke=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).bookToConfirm=function(t){var a=e.props.match.params.book_id;e.booksService.bookConfirmed(t,a).then((function(e){return e})).catch((function(e){return console.log(e)}))},e.negateBook=function(){e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},{accepted:!1})}),e.bookToConfirm(e.state.book.accepted)},e.confirmBook=function(){e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},{accepted:!0})}),e.bookToConfirm(e.state.book.accepted)},e.loadBook=function(){var t=e.props.match.params.book_id;return e.booksService.bookDetails(t).then((function(t){return e.setState({book:t.data})})).catch((function(e){return console.log(e)}))},e.state={book:void 0,modal:!1},e.booksService=new v,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadBook()}},{key:"render",value:function(){var e=this.props,t=e.loggedUser,a=e.storeUser,s=e.history;return Object(y.jsx)(we,Object(c.a)(Object(c.a)(Object(c.a)({loadBook:this.loadBook},this.props),{},{negateBook:this.negateBook,confirmBook:this.confirmBook},this.state.book),{},{loggedUser:t,storeUser:a,history:s}))}}]),a}(s.Component),Ce=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.postService.postDetails(t).then((function(t){return e.setState({post:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({post:Object(c.a)(Object(c.a)({},e.state.post),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.post_id;t.preventDefault(),e.postService.postEdit(e.state.post,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,post:Object(c.a)(Object(c.a)({},e.state.post),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={post:{title:"",text:"",image:"",review:"",owner:""},loading:!1},e.postService=new T,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.post_id;this.loadFormInfo(e)}},{key:"render",value:function(){return Object(y.jsx)(S.a,{children:this.state.post?Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsxs)("h1",{children:["Edit ",this.state.post.title]}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.post.title,onChange:this.handleInputChange,name:"title",placeholder:"Title",required:!0})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"text",children:[Object(y.jsx)(D.a.Label,{children:"Text"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.post.text,onChange:this.handleInputChange,name:"text",placeholder:"Text",required:!0})]})}),Object(y.jsx)("img",{style:{width:"100px"},src:this.state.post.image,alt:"book cover"}),Object(y.jsxs)(D.a.Group,{className:"mb-3",controlId:"image",children:[Object(y.jsx)(D.a.Label,{children:"Image"}),Object(y.jsx)(D.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"Edit"})]})]})}):Object(y.jsx)(b.a,{})})}}]),a}(s.Component),Se=a.p+"static/media/heart.6df3bb27.svg",Ne=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).printHearts=function(e){for(var t=[],a=0;a<e;a++)t.push(Object(y.jsx)("img",{className:"heart",src:Se}));return t},e.state={modal:!1,review:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.history,s=t.loggedUser,n=t.storeUser,o=t.loadPost,r=t.review;return null===r||void 0===r||r.reverse(),Object(y.jsx)(y.Fragment,{children:this.props.title?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{md:{span:4,offset:4},children:[Object(y.jsx)(p.a,{className:"cover-img",src:this.props.image,alt:this.props.title}),Object(y.jsx)("br",{}),Object(y.jsxs)("h3",{className:"profile-name",children:[this.props.title,Object(y.jsx)(p.a,{className:"profile-check",src:""})]}),Object(y.jsx)("p",{className:"profile-bio",children:this.props.text})]}),Object(y.jsx)(u.a,{md:{span:2,offset:5},children:Object(y.jsxs)(N.b,{className:"mint-button",to:"/profile/"+this.props.owner[0]._id,children:[this.props.owner[0].firstName," ",this.props.owner[0].lastName]})}),Object(y.jsx)(u.a,{md:{span:10,offset:1},children:Object(y.jsxs)(m.a,{className:"mb-3",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,review:!0})},children:"add review"})}),Object(y.jsx)(u.a,{children:Object(y.jsx)("button",{className:"pink-button",onClick:function(){return e.setState({modal:!0})},children:"edit post"})})]})}),Object(y.jsxs)(u.a,{md:{span:6,offset:3},children:[Object(y.jsx)("br",{}),Object(y.jsx)("h3",{children:"Reviews: "}),Object(y.jsx)("hr",{}),r.map((function(t){return Object(y.jsxs)(y.Fragment,{children:[e.printHearts(t.points),Object(y.jsx)("h4",{children:t.title}),Object(y.jsx)("p",{children:t.text})]})}))]}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:this.state.review?Object(y.jsx)(fe,Object(c.a)(Object(c.a)({loadPost:o},this.props),{},{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n})):Object(y.jsx)(Ce,Object(c.a)(Object(c.a)({},this.props),{},{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n}))})]})]}):Object(y.jsx)(b.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})}}]),a}(s.Component),ye=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadPost=function(){var t=e.props.match.params.post_id;return e.postsService.postDetails(t).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))},e.state={post:void 0,modal:!1},e.postsService=new T,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadPost()}},{key:"render",value:function(){var e=this.props,t=e.loggedUser,a=e.storeUser,s=e.history;return Object(y.jsx)(Ne,Object(c.a)(Object(c.a)(Object(c.a)({loadPost:this.loadPost},this.state.post),this.props),{},{loggedUser:t,storeUser:a,history:s}))}}]),a}(s.Component),Ue=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.reviewService.reviewDetails(t).then((function(t){return e.setState({review:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.review_id;t.preventDefault(),e.reviewService.reviewEdit(e.state.review,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,review:Object(c.a)(Object(c.a)({},e.state.review),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={review:{title:"",text:"",points:"",owner:""},loading:!1},e.reviewService=new te,e.uploadsService=new P,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.review_id;this.loadFormInfo(e)}},{key:"render",value:function(){return console.log(this.props,"PROPS"),Object(y.jsx)(S.a,{children:this.state.review?Object(y.jsx)(m.a,{children:Object(y.jsxs)(u.a,{md:{span:8,offset:2},children:[Object(y.jsxs)("h1",{children:["Edit ",this.state.review.title]}),Object(y.jsx)("hr",{}),Object(y.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"title",children:[Object(y.jsx)(D.a.Label,{children:"Title"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.review.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(y.jsx)(m.a,{className:"mb-3",children:Object(y.jsxs)(D.a.Group,{as:u.a,controlId:"text",children:[Object(y.jsx)(D.a.Label,{children:"Review"}),Object(y.jsx)(D.a.Control,{type:"text",value:this.state.review.text,onChange:this.handleInputChange,name:"text",placeholder:"Review"})]})}),Object(y.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]})]})}):Object(y.jsx)(b.a,{})})}}]),a}(s.Component),Ie=function(e){var t=e.storeUser,a=e.loggedUser,s=e.fetchUser,n=e.showMessage;return Object(y.jsxs)(j.d,{children:[Object(y.jsx)(j.b,{path:"/",exact:!0,render:function(e){return Object(y.jsx)(ee,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/profile",exact:!0,render:function(e){return Object(y.jsx)(A,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/profile/:user_id",exact:!0,render:function(e){return Object(y.jsx)(E,Object(c.a)(Object(c.a)({},e),{},{fetchUser:s,loggedUser:a,storeUser:t,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/profile/edit/:user_id",exact:!0,render:function(e){return Object(y.jsx)(R,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/book/details/:book_id",render:function(e){return Object(y.jsx)(ke,Object(c.a)(Object(c.a)({loggedUser:a},e),{},{showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/book/:book_id",exact:!0,render:function(e){return Object(y.jsx)(ge,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/post/details/:post_id",render:function(e){return Object(y.jsx)(ye,Object(c.a)(Object(c.a)({},e),{},{showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/post/:post_id",exact:!0,render:function(e){return Object(y.jsx)(Ce,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t,showMessage:n}))}}),Object(y.jsx)(j.b,{path:"/review/:review_id",exact:!0,render:function(e){return Object(y.jsx)(Ue,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t,showMessage:n}))}})]})},Le=a(169),Fe=a(104),Me=a(97),_e=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(y.jsxs)(D.a,{className:"d-flex",children:[Object(y.jsx)(Me.a,Object(G.a)({className:"search-bar",onChange:this.props.search,placeholder:"Search",type:"search"},"placeholder","Search")),Object(y.jsx)("button",{className:"search-button",children:"Search"})]})}}]),a}(s.Component),Be=a(81),Ge=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:void 0,modal:!1},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.book;return n?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("li",{className:"dropdown",children:[Object(y.jsx)("button",{onClick:function(){return e.setState({modal:!0})},children:this.props.book.title}),Object(y.jsxs)(O.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:n.price?Object(y.jsx)(we,Object(c.a)(Object(c.a)({},n),{},{closeModal:function(){return e.setState({modal:!1})},negateBook:Be.negateBook,confirmBook:Be.confirmBook,loggedUser:a,storeUser:s})):Object(y.jsx)(Ne,Object(c.a)(Object(c.a)({},n),{},{closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}))})]})]})}):Object(y.jsx)(b.a,{})}}]),a}(s.Component),De=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.loggedUser;return Object(y.jsx)("div",{className:"border-results",children:Object(y.jsx)("ul",{className:"search-results",children:this.props.bookList.map((function(t,a){return Object(y.jsx)(Ge,{book:t,loggedUser:e},a)}))})})}}]),a}(s.Component),Pe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:s.props.timeline,appName:"React Search Bar",list:void 0},s}return Object(l.a)(a,[{key:"searchData",value:function(e){var t=e.target.value?this.state.data.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())})):[];this.setState({list:t})}},{key:"componentDidUpdate",value:function(e,t){var a,s;(null===(a=this.props.timeline)||void 0===a?void 0:a.length)!==(null===(s=e.timeline)||void 0===s?void 0:s.length)&&this.setState({data:this.props.timeline})}},{key:"render",value:function(){var e=this.props.loggedUser;return Object(y.jsxs)("div",{children:[Object(y.jsx)(_e,{search:this.searchData.bind(this)}),this.state.list?Object(y.jsx)(De,{loggedUser:e,bookList:this.state.list}):null]})}}]),a}(s.Component),qe=a.p+"static/media/logo.9df91d2e.svg",Te=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).logout=function(){e.authService.logout().then((function(){e.props.showMessage("Logout successful"),e.props.storeUser(void 0),e.props.history.push("/")})).catch((function(e){return console.log(e)}))},e.getTimeline=function(){var t=e.bookService.bookList(),a=e.postService.postList();Promise.all([t,a]).then((function(t){e.setState({books:t[0].data,posts:t[1].data,timeline:[].concat(Object(K.a)(t[0].data),Object(K.a)(t[1].data))})})).catch((function(e){return console.log(e)}))},e.handleClose=function(){e.setState({show:!1})},e.handleShow=function(){e.setState({show:!0})},e.state={users:void 0,books:void 0,posts:void 0,modal:!1},e.usersService=new g,e.authService=new Q,e.bookService=new v,e.postService=new T,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getTimeline()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history,o=t.showMessage;return Object(y.jsxs)(Le.a,{className:"navbar",bg:"light",variant:"light",expand:"md",children:[Object(y.jsxs)(Le.a.Brand,{href:"/",children:[Object(y.jsx)("img",{className:"logo",src:qe,alt:""}),Object(y.jsx)("button",{className:"brand",children:"forWords"})]}),Object(y.jsx)(Le.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsx)(Le.a.Collapse,{className:"justify-content-end",children:Object(y.jsx)(Fe.a,{className:"mr-auto",children:a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Pe,{books:this.state.books,posts:this.state.posts,timeline:this.state.timeline,loggedUser:a}),Object(y.jsxs)(N.b,{className:"navbar-link",to:"/profile",children:[" ",Object(y.jsx)("button",{className:"navbar-button",children:a?a.firstName:""})]}),Object(y.jsx)("button",{className:"navbar-button",children:Object(y.jsx)("span",{className:"navbar-link",onClick:this.logout,children:"Logout"})})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"navbar-button",onClick:function(){return e.setState({modal:!0,registerShown:!0})},children:"Register"}),Object(y.jsx)("button",{className:"navbar-button",onClick:function(){return e.setState({modal:!0,registerShown:!1})},children:"Login"}),Object(y.jsxs)(O.a,{className:"login-modal",backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(y.jsx)(O.a.Header,{closeButton:!0}),Object(y.jsx)(O.a.Body,{children:this.state.registerShown?Object(y.jsx)($,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s,showMessage:o}):Object(y.jsx)(Y,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s,showMessage:o})})]})]})})})]})}}]),a}(s.Component),ze=function(){return Object(y.jsx)("footer",{className:"footer",children:"\xabthe purpose of life is a life of purpose\xbb"})},Re=a(170),He=a.p+"static/media/rose-heart.fb624eb0.svg",Ae=function(e){var t=e.closeAlert,a=e.show,s=e.text;return Object(y.jsxs)(Re.a,{autohide:!0,delay:5e3,show:a,onClose:t,style:{zIndex:9999,position:"fixed",bottom:38,right:17,width:300},children:[Object(y.jsx)(Re.a.Header,{closeButton:!1,children:Object(y.jsx)("img",{src:He,className:"rounded mr-2",alt:"Logotipo",style:{width:20,height:20}})}),Object(y.jsx)(Re.a.Body,{children:s})]})},Ee=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).storeUser=function(t){return e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.storeUser(t.data)})).catch((function(){return e.storeUser(null)}))},e.componentDidMount=function(){return e.fetchUser()},e.showMessage=function(t){return e.setState({alert:{show:!0,text:t}})},e.state={loggedUser:void 0,alert:{show:!1,text:""}},e.authService=new Q,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Te,Object(c.a)(Object(c.a)({},this.props),{},{storeUser:this.storeUser,loggedUser:this.state.loggedUser,showMessage:this.showMessage})),Object(y.jsx)(Ie,Object(c.a)(Object(c.a)({},this.props),{},{fetchUser:this.fetchUser,storeUser:this.storeUser,loggedUser:this.state.loggedUser,showMessage:this.showMessage})),Object(y.jsx)(ze,{}),Object(y.jsx)(Ae,{show:this.state.alert.show,text:this.state.alert.text,closeAlert:function(){return e.setState({alert:Object(c.a)(Object(c.a)({},e.state.alert),{},{show:!1})})}})]})}}]),a}(s.Component);r.a.render(Object(y.jsx)(N.a,{children:Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(Ee,{})})}),document.getElementById("root"))},81:function(e,t){e.exports=function(){}}},[[147,1,2]]]);
//# sourceMappingURL=main.b0894d8b.chunk.js.map